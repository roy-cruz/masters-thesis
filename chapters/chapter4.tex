\chapter{Event Generation}

The software framework used to produce the Monte Carlo (CM) samples utilized is the same one used in the latest published search for EMJs, \cite{cmscollaborationSearchNewPhysics2024}. This framework uses the Hidden Valley module \cite{carloniVisibleEffectsInvisible2010, carloniDiscerningSecludedSector2011} in Pythia version 8.240 \cite{sjostrandIntroductionPYTHIA822015}. The parameters available in this model are the mass of the mediator ($m_{\text{Med}}$), the width of the mediator particle ($\Gamma_{\text{Med}}$, the number of dark flavors ($N_{\text{flavor}}^\text{dark}$), the number of dark colors ($N_{\text{color}}^\text{dark}$), the Yukawa couplings between the dark quarks and quarks with the mediator, the dark confinement scale, the masses of the dark quark, the mass of the dark pion ($m_{\pi_{\text{dark}}}$), the dark pion proper decay length ($c\tau_{\pi_{\text{dark}}}$), and the mass of the dark rho meson ($m_{\rho_{\text{dark}}}$). In this work, we follow the simplifying model assumptions suggested in \cite{baiScaleDarkQCD2014} and \cite{schwallerEmergingJets2015}, which are the same as the previous searches for EMJ in CMS \cite{cmscollaborationSearchNewParticles2019, cmscollaborationSearchNewPhysics2024}. 

We set $N_{\text{flavor}}^{\text{dark}} = 7$ due to the running of the dark coupling constant $\alpha_{\text{d}}$ at higher momentum transfer taking place faster for a higher amount of dark flavors, which increases parton multiplicity during showering. Moreover, the dark sector is assumed to have the same number of dark color charges as QCD, that is $N_{\text{color}}^{\text{dark}} = 3$. The quark flavors in the dark sector are set with a degenerate mass equal to the dark confinement scale $\Lambda_{\text{dark}}$, while the dark pion mass is set to $\frac12 \Lambda_{\text{dark}}$ and the dark rho mass is set to $4\Lambda_{\text{dark}}$. In addition to this, for the bi-fundamental model, the width of the mediator was set to $10\;\text{GeV}$, while in the model with the $Z'$ mediator, the width is set to $10\;\text{MeV}$.

For a given type of mediator, all of the aforementioned assumptions leave just three free parameters that uniquely define a particular signal model: the proper decay length and mass of the dark pion, i.e. $m_{\pi_{\text{dark}}}$ and $c\tau_{\pi_{\text{dark}}}$ respectively, and the mass of the mediator $m_{\text{Med}}$. The parameter space simulated for both mediator models was the same, and is summarized in Table \ref{tab:param_vals}.

\begin{table}[]
    \centering
    \begin{tabular}{|c|c|}
        \hline
        Model parameter & List of parameter values \\
        \hline
        $m_{\pi_{\text{dark}}}$ [GeV]   &   10, 20 \\
        $m_{\text{Med}}$ [GeV]          & 100, 250, 500, 750, 1000, 1500, 2000 \\
        $c\tau_{\pi_{\text{dark}}}$ [mm]& 1, 100, 1000, 1500, 2000\\
        \hline
    \end{tabular}
    \caption{Model parameter values used for MC samples}
    \label{tab:param_vals}
\end{table}

Showering and hadronization for the samples produced were simulated with the CP5 underlying event tune \ref{sirunyanExtractionValidationNew2020} in \textsc{Pythia8}, and the NNPDF3.1 next-to-NLO parton distribution functions \cite{ballPartonDistributionsHighprecision2017}. The detector response was modeled with \textsc{Geant4} \cite{agostinelliGeant4aSimulationToolkit2003}, with corrections applied to simulation data discrepancies in resolution and efficiency.